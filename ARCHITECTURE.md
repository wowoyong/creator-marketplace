# í¬ë¦¬ì—ì´í„° ë§ˆì¼“í”Œë ˆì´ìŠ¤ - ì•„í‚¤í…ì²˜ ì„¤ê³„ì„œ

## ğŸ“ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ê°œìš”

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Client Layer                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   Browser   â”‚  â”‚   Mobile    â”‚  â”‚     PWA     â”‚         â”‚
â”‚  â”‚  (Desktop)  â”‚  â”‚   Safari    â”‚  â”‚  (Offline)  â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚ HTTPS / WebSocket
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Next.js 15 (Frontend)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  App Router  â”‚  React Components  â”‚  TailwindCSS    â”‚   â”‚
â”‚  â”‚  PWA Setup   â”‚  Service Worker    â”‚  Push API       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚ REST API / Socket.IO
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      NestJS 11 (Backend)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   Auth      â”‚   Chat      â”‚ Transaction â”‚  Notify  â”‚    â”‚
â”‚  â”‚  Module     â”‚   Gateway   â”‚   Module    â”‚  Module  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Passport.js  â”‚  Socket.IO Server  â”‚  Bull Queue    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                 â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
â”‚PostgreSQLâ”‚      â”‚  Redis   â”‚
â”‚(Prisma) â”‚      â”‚ (Cache)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—„ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ì„¤ê³„

### Prisma Schema (schema.prisma)

```prisma
// ============================================
// User & Profile
// ============================================

enum UserRole {
  ARTIST    // ì‘ê°€
  CLIENT    // í´ë¼ì´ì–¸íŠ¸
}

enum UserStatus {
  ACTIVE
  INACTIVE
  SUSPENDED
}

model User {
  id            String      @id @default(cuid())
  email         String      @unique
  kakaoId       String      @unique
  nickname      String
  profileImage  String?
  role          UserRole
  status        UserStatus  @default(ACTIVE)
  
  createdAt     DateTime    @default(now())
  updatedAt     DateTime    @updatedAt
  lastLoginAt   DateTime?
  
  // Relations
  artistProfile     ArtistProfile?
  clientProfile     ClientProfile?
  sentMessages      Message[]         @relation("SentMessages")
  chatRooms         ChatRoomMember[]
  sentTransactions  Transaction[]     @relation("ClientTransactions")
  receivedTransactions Transaction[]  @relation("ArtistTransactions")
  givenReviews      Review[]          @relation("ReviewAuthor")
  receivedReviews   Review[]          @relation("ReviewTarget")
  notifications     Notification[]
  pushSubscriptions PushSubscription[]
  
  @@index([kakaoId])
  @@index([role, status])
  @@map("users")
}

model ArtistProfile {
  id              String    @id @default(cuid())
  userId          String    @unique
  user            User      @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  // ì‘ê°€ ì •ë³´
  bio             String?   @db.Text
  specialties     String[]  // ["ì¼ëŸ¬ìŠ¤íŠ¸", "ìºë¦­í„° ë””ìì¸"]
  priceRange      String?   // "50,000 ~ 200,000ì›"
  
  // í†µê³„
  totalTransactions Int     @default(0)
  averageRating     Float?
  responseRate      Float?  // ì‘ë‹µë¥ 
  
  // í¬íŠ¸í´ë¦¬ì˜¤
  portfolios        Portfolio[]
  referenceUrls     String[]  // ì™¸ë¶€ ì°¸ê³  ë§í¬
  
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
  
  @@map("artist_profiles")
}

model ClientProfile {
  id              String    @id @default(cuid())
  userId          String    @unique
  user            User      @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  // í´ë¼ì´ì–¸íŠ¸ ì •ë³´
  preferredGenres String[]  // ì„ í˜¸ ì¥ë¥´
  
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
  
  @@map("client_profiles")
}

// ============================================
// Portfolio
// ============================================

model Portfolio {
  id              String        @id @default(cuid())
  artistProfileId String
  artistProfile   ArtistProfile @relation(fields: [artistProfileId], references: [id], onDelete: Cascade)
  
  imageUrl        String        // ì „ì²´ URL: https://domain.com/uploads/portfolio/xxx.jpg
  title           String?
  description     String?       @db.Text
  displayOrder    Int           @default(0)
  
  createdAt       DateTime      @default(now())
  updatedAt       DateTime      @updatedAt
  
  @@index([artistProfileId, displayOrder])
  @@map("portfolios")
}

// ============================================
// Chat System
// ============================================

enum ChatRoomStatus {
  ACTIVE
  ARCHIVED
  DELETED
}

model ChatRoom {
  id          String          @id @default(cuid())
  status      ChatRoomStatus  @default(ACTIVE)
  
  // Relations
  members     ChatRoomMember[]
  messages    Message[]
  transaction Transaction?    // ê±°ë˜ì™€ 1:1 ë§¤í•‘
  
  lastMessageAt DateTime?
  createdAt     DateTime      @default(now())
  updatedAt     DateTime      @updatedAt
  
  @@map("chat_rooms")
}

model ChatRoomMember {
  id          String    @id @default(cuid())
  chatRoomId  String
  chatRoom    ChatRoom  @relation(fields: [chatRoomId], references: [id], onDelete: Cascade)
  
  userId      String
  user        User      @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  lastReadAt  DateTime? // ë§ˆì§€ë§‰ìœ¼ë¡œ ì½ì€ ì‹œê°„
  joinedAt    DateTime  @default(now())
  
  @@unique([chatRoomId, userId])
  @@index([userId])
  @@map("chat_room_members")
}

enum MessageType {
  TEXT
  IMAGE
  FILE
  SYSTEM  // ì‹œìŠ¤í…œ ë©”ì‹œì§€ (ê±°ë˜ ì‹œì‘, ì™„ë£Œ ë“±)
}

model Message {
  id          String      @id @default(cuid())
  chatRoomId  String
  chatRoom    ChatRoom    @relation(fields: [chatRoomId], references: [id], onDelete: Cascade)
  
  senderId    String
  sender      User        @relation("SentMessages", fields: [senderId], references: [id], onDelete: Cascade)
  
  type        MessageType @default(TEXT)
  content     String      @db.Text
  fileUrl     String?     // ì²¨ë¶€ íŒŒì¼ URL
  
  createdAt   DateTime    @default(now())
  updatedAt   DateTime    @updatedAt
  
  @@index([chatRoomId, createdAt])
  @@index([senderId])
  @@map("messages")
}

// ============================================
// Transaction Management
// ============================================

enum TransactionStatus {
  REQUESTED       // ì˜ë¢° ìš”ì²­ë¨
  ACCEPTED        // ì‘ê°€ê°€ ìˆ˜ë½
  IN_PROGRESS     // ì‘ì—… ì§„í–‰ì¤‘
  COMPLETED       // ì™„ë£Œë¨
  REVIEWED        // í›„ê¸° ì‘ì„± ì™„ë£Œ
  CANCELLED       // ì·¨ì†Œë¨
}

// í–¥í›„ ì—ìŠ¤í¬ë¡œ ì „í™˜ ëŒ€ë¹„
enum PaymentMethod {
  EXTERNAL        // ì™¸ë¶€ ê²°ì œ (MVP)
  TOSS_PAYMENTS   // í† ìŠ¤í˜ì´ë¨¼ì¸ 
  BANK_TRANSFER   // ê³„ì¢Œì´ì²´
}

enum EscrowStatus {
  NONE            // ì—ìŠ¤í¬ë¡œ ì—†ìŒ (MVP)
  PENDING         // ê²°ì œ ëŒ€ê¸°
  DEPOSITED       // ì…ê¸ˆë¨
  RELEASED        // ì‘ê°€ì—ê²Œ ì§€ê¸‰
  REFUNDED        // í™˜ë¶ˆë¨
}

model Transaction {
  id              String            @id @default(cuid())
  
  // ê±°ë˜ ë‹¹ì‚¬ì
  clientId        String
  client          User              @relation("ClientTransactions", fields: [clientId], references: [id])
  
  artistId        String
  artist          User              @relation("ArtistTransactions", fields: [artistId], references: [id])
  
  // ì±„íŒ…ë°© ì—°ê²°
  chatRoomId      String            @unique
  chatRoom        ChatRoom          @relation(fields: [chatRoomId], references: [id])
  
  // ê±°ë˜ ì •ë³´
  title           String
  description     String            @db.Text
  agreedPrice     Int?              // í•©ì˜ëœ ê°€ê²© (ì›)
  status          TransactionStatus @default(REQUESTED)
  
  // ê²°ì œ ì •ë³´ (í–¥í›„ ì—ìŠ¤í¬ë¡œ ì „í™˜ ëŒ€ë¹„)
  paymentMethod   PaymentMethod     @default(EXTERNAL)
  escrowStatus    EscrowStatus      @default(NONE)
  pgTransactionId String?           // PGì‚¬ ê±°ë˜ ID
  paidAt          DateTime?
  
  // íƒ€ì„ìŠ¤íƒ¬í”„
  requestedAt     DateTime          @default(now())
  acceptedAt      DateTime?
  completedAt     DateTime?
  cancelledAt     DateTime?
  
  // Relations
  reviews         Review[]
  
  createdAt       DateTime          @default(now())
  updatedAt       DateTime          @updatedAt
  
  @@index([clientId, status])
  @@index([artistId, status])
  @@index([status])
  @@map("transactions")
}

// ============================================
// Review System
// ============================================

enum ReviewType {
  CLIENT_TO_ARTIST  // í´ë¼ì´ì–¸íŠ¸ê°€ ì‘ê°€ì—ê²Œ
  ARTIST_TO_CLIENT  // ì‘ê°€ê°€ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ
}

model Review {
  id            String      @id @default(cuid())
  transactionId String
  transaction   Transaction @relation(fields: [transactionId], references: [id], onDelete: Cascade)
  
  type          ReviewType
  
  // ì‘ì„±ìì™€ ëŒ€ìƒ
  authorId      String
  author        User        @relation("ReviewAuthor", fields: [authorId], references: [id])
  
  targetId      String
  target        User        @relation("ReviewTarget", fields: [targetId], references: [id])
  
  // í‰ê°€ ë‚´ìš©
  rating        Int         // 1-5
  content       String?     @db.Text
  
  createdAt     DateTime    @default(now())
  updatedAt     DateTime    @updatedAt
  
  @@unique([transactionId, type])  // ê±°ë˜ë‹¹ ê° íƒ€ì…ë³„ 1ê°œì”©ë§Œ
  @@index([targetId, rating])
  @@map("reviews")
}

// ============================================
// Notification System
// ============================================

enum NotificationType {
  CHAT_MESSAGE        // ìƒˆ ì±„íŒ… ë©”ì‹œì§€
  TRANSACTION_REQUEST // ì˜ë¢° ìš”ì²­
  TRANSACTION_ACCEPT  // ì˜ë¢° ìˆ˜ë½
  TRANSACTION_COMPLETE // ê±°ë˜ ì™„ë£Œ
  REVIEW_RECEIVED     // í›„ê¸° ë°›ìŒ
  SYSTEM              // ì‹œìŠ¤í…œ ì•Œë¦¼
}

enum NotificationChannel {
  IN_APP
  EMAIL
  PUSH
}

model Notification {
  id          String            @id @default(cuid())
  userId      String
  user        User              @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  type        NotificationType
  title       String
  content     String            @db.Text
  
  // ë©”íƒ€ë°ì´í„°
  metadata    Json?             // ê´€ë ¨ ë°ì´í„° (transactionId, messageId ë“±)
  
  // ìƒíƒœ
  isRead      Boolean           @default(false)
  readAt      DateTime?
  
  // ë°œì†¡ ì±„ë„
  sentChannels NotificationChannel[]
  
  createdAt   DateTime          @default(now())
  
  @@index([userId, isRead, createdAt])
  @@map("notifications")
}

// ============================================
// User Notification Settings
// ============================================

model NotificationSettings {
  id        String   @id @default(cuid())
  userId    String   @unique
  
  // ì±„ë„ë³„ ì„¤ì •
  enableInApp   Boolean @default(true)
  enableEmail   Boolean @default(true)
  enablePush    Boolean @default(true)
  
  // ì´ë²¤íŠ¸ë³„ ì„¤ì •
  notifyOnMessage     Boolean @default(true)
  notifyOnTransaction Boolean @default(true)
  notifyOnReview      Boolean @default(true)
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  @@map("notification_settings")
}

// ============================================
// PWA Push Subscription
// ============================================

model PushSubscription {
  id          String   @id @default(cuid())
  userId      String
  user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  endpoint    String   @unique
  keys        Json     // {p256dh: string, auth: string}
  
  userAgent   String?
  
  createdAt   DateTime @default(now())
  lastUsedAt  DateTime @default(now())
  
  @@index([userId])
  @@map("push_subscriptions")
}
```

---

## ğŸ— ëª¨ë“ˆ êµ¬ì¡° (NestJS)

```
src/
â”œâ”€â”€ main.ts
â”œâ”€â”€ app.module.ts
â”‚
â”œâ”€â”€ auth/                    # ì¸ì¦ ëª¨ë“ˆ
â”‚   â”œâ”€â”€ auth.module.ts
â”‚   â”œâ”€â”€ auth.controller.ts
â”‚   â”œâ”€â”€ auth.service.ts
â”‚   â”œâ”€â”€ strategies/
â”‚   â”‚   â”œâ”€â”€ kakao.strategy.ts
â”‚   â”‚   â””â”€â”€ jwt.strategy.ts
â”‚   â””â”€â”€ guards/
â”‚       â””â”€â”€ roles.guard.ts
â”‚
â”œâ”€â”€ users/                   # ì‚¬ìš©ì ê´€ë¦¬
â”‚   â”œâ”€â”€ users.module.ts
â”‚   â”œâ”€â”€ users.controller.ts
â”‚   â”œâ”€â”€ users.service.ts
â”‚   â””â”€â”€ dto/
â”‚
â”œâ”€â”€ artists/                 # ì‘ê°€ í”„ë¡œí•„
â”‚   â”œâ”€â”€ artists.module.ts
â”‚   â”œâ”€â”€ artists.controller.ts
â”‚   â”œâ”€â”€ artists.service.ts
â”‚   â””â”€â”€ dto/
â”‚
â”œâ”€â”€ portfolios/              # í¬íŠ¸í´ë¦¬ì˜¤
â”‚   â”œâ”€â”€ portfolios.module.ts
â”‚   â”œâ”€â”€ portfolios.controller.ts
â”‚   â”œâ”€â”€ portfolios.service.ts
â”‚   â””â”€â”€ dto/
â”‚
â”œâ”€â”€ chat/                    # ì±„íŒ… ì‹œìŠ¤í…œ
â”‚   â”œâ”€â”€ chat.module.ts
â”‚   â”œâ”€â”€ chat.gateway.ts      # Socket.IO Gateway
â”‚   â”œâ”€â”€ chat.service.ts
â”‚   â”œâ”€â”€ rooms.service.ts
â”‚   â””â”€â”€ dto/
â”‚
â”œâ”€â”€ transactions/            # ê±°ë˜ ê´€ë¦¬
â”‚   â”œâ”€â”€ transactions.module.ts
â”‚   â”œâ”€â”€ transactions.controller.ts
â”‚   â”œâ”€â”€ transactions.service.ts
â”‚   â””â”€â”€ dto/
â”‚
â”œâ”€â”€ reviews/                 # í›„ê¸° ì‹œìŠ¤í…œ
â”‚   â”œâ”€â”€ reviews.module.ts
â”‚   â”œâ”€â”€ reviews.controller.ts
â”‚   â”œâ”€â”€ reviews.service.ts
â”‚   â””â”€â”€ dto/
â”‚
â”œâ”€â”€ notifications/           # ì•Œë¦¼ ì‹œìŠ¤í…œ
â”‚   â”œâ”€â”€ notifications.module.ts
â”‚   â”œâ”€â”€ notifications.controller.ts
â”‚   â”œâ”€â”€ notifications.service.ts
â”‚   â”œâ”€â”€ notifications.gateway.ts  # ì‹¤ì‹œê°„ ì•Œë¦¼
â”‚   â”œâ”€â”€ email.service.ts
â”‚   â”œâ”€â”€ push.service.ts
â”‚   â””â”€â”€ dto/
â”‚
â”œâ”€â”€ uploads/                 # íŒŒì¼ ì—…ë¡œë“œ
â”‚   â”œâ”€â”€ uploads.module.ts
â”‚   â”œâ”€â”€ uploads.controller.ts
â”‚   â”œâ”€â”€ uploads.service.ts
â”‚   â””â”€â”€ storage/
â”‚       â”œâ”€â”€ local.storage.ts
â”‚       â””â”€â”€ cloud.storage.ts (í–¥í›„)
â”‚
â”œâ”€â”€ common/                  # ê³µí†µ ëª¨ë“ˆ
â”‚   â”œâ”€â”€ prisma/
â”‚   â”‚   â”œâ”€â”€ prisma.module.ts
â”‚   â”‚   â””â”€â”€ prisma.service.ts
â”‚   â”œâ”€â”€ redis/
â”‚   â”‚   â”œâ”€â”€ redis.module.ts
â”‚   â”‚   â””â”€â”€ redis.service.ts
â”‚   â””â”€â”€ utils/
â”‚
â””â”€â”€ config/                  # ì„¤ì •
    â”œâ”€â”€ app.config.ts
    â”œâ”€â”€ database.config.ts
    â””â”€â”€ jwt.config.ts
```

---

## ğŸ”„ í•µì‹¬ í”Œë¡œìš° ì„¤ê³„

### 1. ê±°ë˜ í”Œë¡œìš° (Transaction Flow)

```
[í´ë¼ì´ì–¸íŠ¸]              [ì‹œìŠ¤í…œ]              [ì‘ê°€]
     â”‚                      â”‚                     â”‚
     â”‚â”€â”€(1) ì‘ê°€ í”„ë¡œí•„ ì¡°íšŒâ”€â”€â–¶â”‚                     â”‚
     â”‚â—€â”€â”€â”€â”€ì‘ê°€ ì •ë³´ ë°˜í™˜â”€â”€â”€â”€â”‚                     â”‚
     â”‚                      â”‚                     â”‚
     â”‚â”€â”€(2) ì±„íŒ…ë°© ìƒì„± ìš”ì²­â”€â–¶â”‚                     â”‚
     â”‚                      â”‚â”€â”€(3) ì±„íŒ…ë°© ìƒì„±â”€â”€â–¶â”‚
     â”‚â—€â”€â”€â”€â”€ì±„íŒ…ë°© IDâ”€â”€â”€â”€â”€â”€â”€â”€â”‚â—€â”€â”€â”€â”€Socket.IOâ”€â”€â”€â”€â”€â”‚
     â”‚                      â”‚                     â”‚
     â”‚â”€â”€(4) ì˜ë¢° ìš”ì²­ ì „ì†¡â”€â”€â”€â–¶â”‚                     â”‚
     â”‚    (Transaction ìƒì„±)  â”‚â”€â”€(5) ì•Œë¦¼ ë°œì†¡â”€â”€â–¶â”‚
     â”‚                      â”‚    (ì¸ì•±/ì´ë©”ì¼/í‘¸ì‹œ)  â”‚
     â”‚                      â”‚                     â”‚
     â”‚                      â”‚â—€â”€(6) ì˜ë¢° ìˆ˜ë½â”€â”€â”€â”€â”‚
     â”‚â—€â”€â”€(7) ìƒíƒœ ì—…ë°ì´íŠ¸â”€â”€â”‚                     â”‚
     â”‚    (ACCEPTED)         â”‚                     â”‚
     â”‚                      â”‚                     â”‚
     â”‚ â†â”€â”€â”€â”€â”€(8) ì±„íŒ…ìœ¼ë¡œ í˜‘ì˜ (Socket.IO)â”€â”€â”€â”€â”€â”€â–¶ â”‚
     â”‚                      â”‚                     â”‚
     â”‚ (9) ì™¸ë¶€ ê²°ì œ ì§„í–‰    â”‚                     â”‚
     â”‚ (ê³„ì¢Œì´ì²´/í† ìŠ¤ ë“±)     â”‚                     â”‚
     â”‚                      â”‚                     â”‚
     â”‚â”€â”€(10) "ê²°ì œì™„ë£Œ" ìƒíƒœâ”€â–¶â”‚â”€â”€(11) ì•Œë¦¼â”€â”€â”€â”€â”€â”€â–¶â”‚
     â”‚      ì—…ë°ì´íŠ¸ ìš”ì²­     â”‚                     â”‚
     â”‚                      â”‚                     â”‚
     â”‚                      â”‚â—€â”€(12) ì‘ì—… ì™„ë£Œâ”€â”€â”‚
     â”‚â—€â”€â”€(13) ê±°ë˜ ì™„ë£Œ ì•Œë¦¼â”€â”‚      ì „ì†¡          â”‚
     â”‚                      â”‚                     â”‚
     â”‚â”€â”€(14) í›„ê¸° ì‘ì„±â”€â”€â”€â”€â”€â”€â–¶â”‚â”€â”€(15) ì•Œë¦¼â”€â”€â”€â”€â”€â”€â–¶â”‚
     â”‚                      â”‚â—€â”€(16) í›„ê¸° ì‘ì„±â”€â”€â”‚
     â”‚â—€â”€â”€â”€â”€í‰ì  ì—…ë°ì´íŠ¸â”€â”€â”€â”€â”€â”‚                     â”‚
```

### 2. ì‹¤ì‹œê°„ ì±„íŒ… í”Œë¡œìš°

```typescript
// Client â†’ Server
socket.emit('join_room', { roomId: 'xxx' })
socket.emit('send_message', { 
  roomId: 'xxx', 
  content: 'ì•ˆë…•í•˜ì„¸ìš”' 
})

// Server â†’ Client
socket.on('message_received', (message) => {
  // ë©”ì‹œì§€ í‘œì‹œ
})

socket.on('user_typing', (data) => {
  // íƒ€ì´í•‘ í‘œì‹œ
})

socket.on('message_read', (data) => {
  // ì½ìŒ í‘œì‹œ ì—…ë°ì´íŠ¸
})
```

**ì„œë²„ ë¡œì§:**
```typescript
@WebSocketGateway({ namespace: '/chat' })
export class ChatGateway {
  
  @SubscribeMessage('join_room')
  async handleJoinRoom(client: Socket, payload: { roomId: string }) {
    // 1. ê¶Œí•œ í™•ì¸ (í•´ë‹¹ ë°©ì˜ ë©¤ë²„ì¸ì§€)
    // 2. Socketì„ ë°©ì— join
    client.join(payload.roomId)
    // 3. ì½ì§€ ì•Šì€ ë©”ì‹œì§€ ìˆ˜ ì—…ë°ì´íŠ¸
  }
  
  @SubscribeMessage('send_message')
  async handleSendMessage(client: Socket, payload: SendMessageDto) {
    // 1. DBì— ë©”ì‹œì§€ ì €ì¥
    const message = await this.chatService.createMessage(payload)
    
    // 2. ë°©ì˜ ëª¨ë“  ë©¤ë²„ì—ê²Œ ì „ì†¡
    this.server.to(payload.roomId).emit('message_received', message)
    
    // 3. ìƒëŒ€ë°©ì—ê²Œ ì•Œë¦¼ ë°œì†¡ (ì˜¤í”„ë¼ì¸ ì‹œ)
    await this.notificationService.notifyNewMessage(message)
  }
}
```

### 3. ì•Œë¦¼ ì‹œìŠ¤í…œ í”Œë¡œìš°

```typescript
// notifications.service.ts
async sendNotification(params: {
  userId: string
  type: NotificationType
  title: string
  content: string
  metadata?: any
}) {
  // 1. ì‚¬ìš©ì ì•Œë¦¼ ì„¤ì • ì¡°íšŒ
  const settings = await this.getSettings(params.userId)
  
  const channels: NotificationChannel[] = []
  
  // 2. ì¸ì•± ì•Œë¦¼ (í•­ìƒ ì €ì¥)
  const notification = await this.createInAppNotification(params)
  channels.push('IN_APP')
  
  // 3. ì‹¤ì‹œê°„ í‘¸ì‹œ (Socket.IO)
  if (settings.enableInApp) {
    this.gateway.server
      .to(`user:${params.userId}`)
      .emit('notification', notification)
  }
  
  // 4. ì´ë©”ì¼ ë°œì†¡
  if (settings.enableEmail && this.shouldSendEmail(params.type)) {
    await this.emailService.send({
      to: user.email,
      template: this.getEmailTemplate(params.type),
      data: params
    })
    channels.push('EMAIL')
  }
  
  // 5. PWA í‘¸ì‹œ
  if (settings.enablePush) {
    await this.pushService.send({
      userId: params.userId,
      title: params.title,
      body: params.content,
      data: params.metadata
    })
    channels.push('PUSH')
  }
  
  // 6. ë°œì†¡ ì±„ë„ ê¸°ë¡
  await this.updateSentChannels(notification.id, channels)
}
```

---

## ğŸ“± PWA í‘¸ì‹œ ì•Œë¦¼ êµ¬í˜„

### í”„ë¡ íŠ¸ì—”ë“œ (Next.js)

```typescript
// app/service-worker.ts
self.addEventListener('push', (event) => {
  const data = event.data?.json()
  
  event.waitUntil(
    self.registration.showNotification(data.title, {
      body: data.body,
      icon: '/icon-192.png',
      badge: '/badge-72.png',
      data: data.metadata
    })
  )
})

self.addEventListener('notificationclick', (event) => {
  event.notification.close()
  
  // ì•Œë¦¼ í´ë¦­ ì‹œ í•´ë‹¹ í˜ì´ì§€ë¡œ ì´ë™
  const urlToOpen = event.notification.data.url || '/'
  event.waitUntil(
    clients.openWindow(urlToOpen)
  )
})
```

```typescript
// hooks/usePushNotification.ts
export function usePushNotification() {
  const subscribe = async () => {
    // 1. Service Worker ë“±ë¡
    const registration = await navigator.serviceWorker.ready
    
    // 2. Push êµ¬ë…
    const subscription = await registration.pushManager.subscribe({
      userVisibleOnly: true,
      applicationServerKey: urlBase64ToUint8Array(process.env.NEXT_PUBLIC_VAPID_PUBLIC_KEY)
    })
    
    // 3. ë°±ì—”ë“œì— êµ¬ë… ì •ë³´ ì „ì†¡
    await fetch('/api/notifications/subscribe', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(subscription)
    })
  }
  
  return { subscribe }
}
```

### ë°±ì—”ë“œ (NestJS)

```typescript
// push.service.ts
import * as webpush from 'web-push'

@Injectable()
export class PushService {
  constructor(private prisma: PrismaService) {
    webpush.setVapidDetails(
      'mailto:support@example.com',
      process.env.VAPID_PUBLIC_KEY,
      process.env.VAPID_PRIVATE_KEY
    )
  }
  
  async send(params: {
    userId: string
    title: string
    body: string
    data?: any
  }) {
    // 1. ì‚¬ìš©ìì˜ ëª¨ë“  êµ¬ë… ì •ë³´ ì¡°íšŒ
    const subscriptions = await this.prisma.pushSubscription.findMany({
      where: { userId: params.userId }
    })
    
    // 2. ê° êµ¬ë…ì— í‘¸ì‹œ ë°œì†¡
    const promises = subscriptions.map(sub => 
      webpush.sendNotification(
        {
          endpoint: sub.endpoint,
          keys: sub.keys as any
        },
        JSON.stringify({
          title: params.title,
          body: params.body,
          metadata: params.data
        })
      ).catch(error => {
        // ë§Œë£Œëœ êµ¬ë… ì‚­ì œ
        if (error.statusCode === 410) {
          return this.prisma.pushSubscription.delete({
            where: { id: sub.id }
          })
        }
      })
    )
    
    await Promise.all(promises)
  }
}
```

---

## ğŸ–¼ íŒŒì¼ ì €ì¥ì†Œ ì „í™˜ ì „ëµ

### í˜„ì¬ êµ¬ì¡° (MVP)

```typescript
// uploads.service.ts
@Injectable()
export class UploadsService {
  private readonly STORAGE_BASE_URL = process.env.STORAGE_BASE_URL || 'http://localhost:3000'
  private readonly UPLOAD_DIR = path.join(process.cwd(), 'uploads')
  
  async uploadPortfolio(file: Express.Multer.File, userId: string): Promise<string> {
    // 1. íŒŒì¼ ì €ì¥
    const filename = `${Date.now()}-${file.originalname}`
    const filepath = path.join(this.UPLOAD_DIR, 'portfolio', filename)
    await fs.writeFile(filepath, file.buffer)
    
    // 2. ì „ì²´ URL ë°˜í™˜ (ì¤‘ìš”!)
    const imageUrl = `${this.STORAGE_BASE_URL}/uploads/portfolio/${filename}`
    
    return imageUrl
  }
}
```

### í–¥í›„ êµ¬ì¡° (Cloudflare R2)

```typescript
// storage/cloud.storage.ts
import { S3Client, PutObjectCommand } from '@aws-sdk/client-s3'

@Injectable()
export class CloudStorage {
  private s3Client: S3Client
  
  constructor() {
    this.s3Client = new S3Client({
      region: 'auto',
      endpoint: process.env.R2_ENDPOINT,
      credentials: {
        accessKeyId: process.env.R2_ACCESS_KEY,
        secretAccessKey: process.env.R2_SECRET_KEY
      }
    })
  }
  
  async upload(file: Express.Multer.File, key: string): Promise<string> {
    await this.s3Client.send(new PutObjectCommand({
      Bucket: process.env.R2_BUCKET,
      Key: key,
      Body: file.buffer,
      ContentType: file.mimetype
    }))
    
    // R2 Public URL
    return `${process.env.R2_PUBLIC_URL}/${key}`
  }
}
```

### ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸

```typescript
// scripts/migrate-to-cloud.ts
async function migrateImagesToCloud() {
  const portfolios = await prisma.portfolio.findMany()
  
  for (const portfolio of portfolios) {
    // 1. ë¡œì»¬ íŒŒì¼ ì½ê¸°
    const localPath = portfolio.imageUrl.replace('http://localhost:3000', '')
    const fileBuffer = await fs.readFile(path.join(process.cwd(), localPath))
    
    // 2. R2ì— ì—…ë¡œë“œ
    const filename = path.basename(localPath)
    const r2Url = await cloudStorage.upload({
      buffer: fileBuffer,
      originalname: filename,
      mimetype: 'image/jpeg'
    } as any, `portfolio/${filename}`)
    
    // 3. DB ì—…ë°ì´íŠ¸
    await prisma.portfolio.update({
      where: { id: portfolio.id },
      data: { imageUrl: r2Url }
    })
    
    console.log(`Migrated: ${portfolio.id}`)
  }
}
```

---

## ğŸ” ì¸ì¦ & ë³´ì•ˆ

### JWT ì „ëµ

```typescript
// auth.service.ts
async login(kakaoUser: any) {
  // 1. ì¹´ì¹´ì˜¤ ì‚¬ìš©ì ì •ë³´ë¡œ User ì°¾ê¸° ë˜ëŠ” ìƒì„±
  let user = await this.prisma.user.findUnique({
    where: { kakaoId: kakaoUser.id }
  })
  
  if (!user) {
    user = await this.prisma.user.create({
      data: {
        kakaoId: kakaoUser.id,
        email: kakaoUser.email,
        nickname: kakaoUser.nickname,
        profileImage: kakaoUser.profile_image,
        role: 'CLIENT' // ê¸°ë³¸ê°’, ë‚˜ì¤‘ì— ë³€ê²½ ê°€ëŠ¥
      }
    })
  }
  
  // 2. JWT ë°œê¸‰
  const payload = { sub: user.id, role: user.role }
  return {
    access_token: this.jwtService.sign(payload),
    user
  }
}
```

### Role-based Access Control

```typescript
// guards/roles.guard.ts
@Injectable()
export class RolesGuard implements CanActivate {
  constructor(private reflector: Reflector) {}
  
  canActivate(context: ExecutionContext): boolean {
    const requiredRoles = this.reflector.get<UserRole[]>('roles', context.getHandler())
    if (!requiredRoles) return true
    
    const request = context.switchToHttp().getRequest()
    const user = request.user
    
    return requiredRoles.some(role => user.role === role)
  }
}

// ì‚¬ìš© ì˜ˆì‹œ
@Get('profile')
@Roles(UserRole.ARTIST)
@UseGuards(JwtAuthGuard, RolesGuard)
async getArtistProfile(@CurrentUser() user: User) {
  return this.artistsService.getProfile(user.id)
}
```

---

## âš¡ï¸ ì„±ëŠ¥ ìµœì í™”

### 1. Database Query Optimization

```typescript
// artists.service.ts
async getArtistsWithStats(params: GetArtistsDto) {
  return this.prisma.user.findMany({
    where: {
      role: 'ARTIST',
      status: 'ACTIVE'
    },
    include: {
      artistProfile: {
        include: {
          portfolios: {
            take: 5,
            orderBy: { displayOrder: 'asc' }
          },
          // N+1 ë°©ì§€: í‰ê·  í‰ì  ê³„ì‚° (Prisma aggregation)
          _count: {
            select: { portfolios: true }
          }
        }
      },
      // ë°›ì€ ë¦¬ë·° í‰ê·  (ë¯¸ë¦¬ ê³„ì‚°ëœ averageRating ì‚¬ìš©)
      receivedReviews: {
        select: {
          rating: true
        },
        take: 10,
        orderBy: { createdAt: 'desc' }
      }
    },
    skip: params.skip,
    take: params.take
  })
}
```

### 2. Redis Caching

```typescript
// artists.service.ts
async getFeaturedArtists() {
  const cacheKey = 'featured_artists'
  
  // 1. ìºì‹œ í™•ì¸
  const cached = await this.redis.get(cacheKey)
  if (cached) return JSON.parse(cached)
  
  // 2. DB ì¡°íšŒ
  const artists = await this.prisma.user.findMany({
    where: {
      role: 'ARTIST',
      artistProfile: {
        averageRating: { gte: 4.5 },
        totalTransactions: { gte: 10 }
      }
    },
    include: {
      artistProfile: {
        include: {
          portfolios: { take: 3 }
        }
      }
    },
    take: 10
  })
  
  // 3. ìºì‹œ ì €ì¥ (10ë¶„)
  await this.redis.setex(cacheKey, 600, JSON.stringify(artists))
  
  return artists
}
```

### 3. Image Optimization

```typescript
// uploads.service.ts
import sharp from 'sharp'

async uploadPortfolio(file: Express.Multer.File): Promise<string> {
  // 1. ì´ë¯¸ì§€ ë¦¬ì‚¬ì´ì§• & ìµœì í™”
  const optimized = await sharp(file.buffer)
    .resize(1200, 1200, { 
      fit: 'inside',
      withoutEnlargement: true 
    })
    .webp({ quality: 85 })
    .toBuffer()
  
  // 2. ì €ì¥
  const filename = `${Date.now()}.webp`
  await fs.writeFile(
    path.join(this.UPLOAD_DIR, 'portfolio', filename),
    optimized
  )
  
  return `${this.STORAGE_BASE_URL}/uploads/portfolio/${filename}`
}
```

---

## ğŸš€ ë°°í¬ ì „ëµ

### PM2 Ecosystem ì„¤ì •

```javascript
// ecosystem.config.js
module.exports = {
  apps: [
    {
      name: 'creator-marketplace-api',
      script: 'dist/main.js',
      instances: 2,  // í´ëŸ¬ìŠ¤í„° ëª¨ë“œ
      exec_mode: 'cluster',
      env: {
        NODE_ENV: 'production',
        PORT: 3001
      },
      error_file: './logs/api-error.log',
      out_file: './logs/api-out.log',
      log_date_format: 'YYYY-MM-DD HH:mm:ss Z'
    },
    {
      name: 'creator-marketplace-web',
      script: 'node_modules/next/dist/bin/next',
      args: 'start -p 3000',
      instances: 1,
      env: {
        NODE_ENV: 'production',
        NEXT_PUBLIC_API_URL: 'https://api.yourdomain.com'
      }
    }
  ]
}
```

### Nginx ì„¤ì •

```nginx
# /etc/nginx/sites-available/creator-marketplace
upstream api_backend {
  server localhost:3001;
}

upstream web_frontend {
  server localhost:3000;
}

server {
  listen 80;
  server_name yourdomain.com;
  
  # HTTPS ë¦¬ë‹¤ì´ë ‰íŠ¸ (Let's Encrypt ì„¤ì • í›„)
  return 301 https://$server_name$request_uri;
}

server {
  listen 443 ssl http2;
  server_name yourdomain.com;
  
  # SSL ì¸ì¦ì„œ (Let's Encrypt)
  ssl_certificate /etc/letsencrypt/live/yourdomain.com/fullchain.pem;
  ssl_certificate_key /etc/letsencrypt/live/yourdomain.com/privkey.pem;
  
  # API ìš”ì²­
  location /api {
    proxy_pass http://api_backend;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_set_header Host $host;
    proxy_cache_bypass $http_upgrade;
  }
  
  # Socket.IO
  location /socket.io {
    proxy_pass http://api_backend;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
  }
  
  # ì •ì  íŒŒì¼ (ì—…ë¡œë“œ)
  location /uploads {
    alias /Users/chojaeyong/WebstormProjects/creator-marketplace/uploads;
    expires 1y;
    add_header Cache-Control "public, immutable";
  }
  
  # Next.js í”„ë¡ íŠ¸ì—”ë“œ
  location / {
    proxy_pass http://web_frontend;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_set_header Host $host;
    proxy_cache_bypass $http_upgrade;
  }
}
```

---

## ğŸ“Š ëª¨ë‹ˆí„°ë§ & ë¡œê¹…

### Winston Logger ì„¤ì •

```typescript
// common/logger/logger.service.ts
import { createLogger, format, transports } from 'winston'

const logger = createLogger({
  level: process.env.LOG_LEVEL || 'info',
  format: format.combine(
    format.timestamp(),
    format.errors({ stack: true }),
    format.json()
  ),
  transports: [
    new transports.File({ filename: 'logs/error.log', level: 'error' }),
    new transports.File({ filename: 'logs/combined.log' }),
    new transports.Console({
      format: format.combine(
        format.colorize(),
        format.simple()
      )
    })
  ]
})
```

---

## ğŸ”„ ì—ìŠ¤í¬ë¡œ ì „í™˜ ì‹œ í•„ìš” ì‘ì—…

### 1. PG ì—°ë™ (í† ìŠ¤í˜ì´ë¨¼ì¸ )

```typescript
// payments/toss.service.ts
@Injectable()
export class TossPaymentsService {
  private readonly CLIENT_KEY = process.env.TOSS_CLIENT_KEY
  private readonly SECRET_KEY = process.env.TOSS_SECRET_KEY
  
  async requestPayment(transaction: Transaction) {
    const response = await fetch('https://api.tosspayments.com/v1/payments', {
      method: 'POST',
      headers: {
        'Authorization': `Basic ${Buffer.from(this.SECRET_KEY + ':').toString('base64')}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        orderId: transaction.id,
        amount: transaction.agreedPrice,
        orderName: transaction.title,
        successUrl: `${process.env.FRONTEND_URL}/payment/success`,
        failUrl: `${process.env.FRONTEND_URL}/payment/fail`
      })
    })
    
    return response.json()
  }
  
  async confirmPayment(paymentKey: string, orderId: string, amount: number) {
    // ê²°ì œ ìŠ¹ì¸
    await this.prisma.transaction.update({
      where: { id: orderId },
      data: {
        pgTransactionId: paymentKey,
        escrowStatus: 'DEPOSITED',
        paidAt: new Date()
      }
    })
  }
  
  async releaseToArtist(transactionId: string) {
    // ì‘ê°€ì—ê²Œ ì •ì‚°
    const transaction = await this.prisma.transaction.findUnique({
      where: { id: transactionId }
    })
    
    // í† ìŠ¤í˜ì´ë¨¼ì¸  ì •ì‚° API í˜¸ì¶œ
    // ...
    
    await this.prisma.transaction.update({
      where: { id: transactionId },
      data: { escrowStatus: 'RELEASED' }
    })
  }
}
```

### 2. Transaction ìƒíƒœ FSM

```typescript
// transactions/transaction.state.ts
enum TransactionStatus {
  REQUESTED = 'REQUESTED',
  ACCEPTED = 'ACCEPTED',
  PAYMENT_PENDING = 'PAYMENT_PENDING',  // ì¶”ê°€
  PAYMENT_COMPLETE = 'PAYMENT_COMPLETE', // ì¶”ê°€
  IN_PROGRESS = 'IN_PROGRESS',
  COMPLETED = 'COMPLETED',
  REVIEWED = 'REVIEWED',
  CANCELLED = 'CANCELLED'
}

const TRANSITIONS = {
  REQUESTED: ['ACCEPTED', 'CANCELLED'],
  ACCEPTED: ['PAYMENT_PENDING', 'CANCELLED'],
  PAYMENT_PENDING: ['PAYMENT_COMPLETE', 'CANCELLED'],
  PAYMENT_COMPLETE: ['IN_PROGRESS'],
  IN_PROGRESS: ['COMPLETED', 'CANCELLED'],
  COMPLETED: ['REVIEWED'],
  REVIEWED: [],
  CANCELLED: []
}

function canTransition(from: TransactionStatus, to: TransactionStatus): boolean {
  return TRANSITIONS[from].includes(to)
}
```

---

## âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸

### MVP ì¶œì‹œ ì „ í•„ìˆ˜ í•­ëª©

- [ ] **ê¸°ëŠ¥ ì™„ì„±ë„**
  - [ ] ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ë™ì‘
  - [ ] ì‘ê°€ í”„ë¡œí•„ ìƒì„± (í¬íŠ¸í´ë¦¬ì˜¤ 5ì¥ í•„ìˆ˜)
  - [ ] ì‘ê°€ ê²€ìƒ‰/ëª©ë¡
  - [ ] 1:1 ì±„íŒ… (ì‹¤ì‹œê°„)
  - [ ] ê±°ë˜ ìƒíƒœ ê´€ë¦¬
  - [ ] í›„ê¸° ì‘ì„± (ì–‘ë°©í–¥)
  - [ ] ì•Œë¦¼ (ì¸ì•±/ì´ë©”ì¼/í‘¸ì‹œ)

- [ ] **ë³´ì•ˆ**
  - [ ] HTTPS ì ìš©
  - [ ] JWT ë§Œë£Œ ì‹œê°„ ì„¤ì • (1ì‹œê°„)
  - [ ] Refresh Token êµ¬í˜„
  - [ ] CORS ì„¤ì •
  - [ ] XSS ë°©ì§€ (Input sanitization)
  - [ ] CSRF ë°©ì§€
  - [ ] Rate Limiting

- [ ] **ì„±ëŠ¥**
  - [ ] Database Index ì„¤ì •
  - [ ] N+1 ì¿¼ë¦¬ í•´ê²°
  - [ ] ì´ë¯¸ì§€ ìµœì í™” (WebP, ë¦¬ì‚¬ì´ì§•)
  - [ ] API ì‘ë‹µ ì‹œê°„ < 500ms

- [ ] **ë²•ì **
  - [ ] ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨
  - [ ] ì´ìš©ì•½ê´€
  - [ ] ì¿ í‚¤ ì •ì±…

- [ ] **ëª¨ë‹ˆí„°ë§**
  - [ ] ì—ëŸ¬ ë¡œê¹… (Winston)
  - [ ] PM2 ëª¨ë‹ˆí„°ë§
  - [ ] DB ë°±ì—… ìŠ¤í¬ë¦½íŠ¸

---

**ë¬¸ì„œ ë²„ì „**: 1.0  
**ìµœì¢… ìˆ˜ì •ì¼**: 2026-02-04  
**ì‘ì„±ì**: Sisyphus (OhMyClaude Code)
